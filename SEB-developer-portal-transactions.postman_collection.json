{
	"info": {
		"_postman_id": "50a724af-0371-4895-9661-6b62ec93e0b0",
		"name": "SEB-developer-portal-transactions",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Get Accounts",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Expect status OK\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"var jsonData = JSON.parse(responseBody);",
							"",
							"postman.setEnvironmentVariable(\"account_resource_Id\", jsonData.accounts[0].resourceId);",
							"postman.setEnvironmentVariable(\"account_details_href\", jsonData.accounts[0]._links.transactions.href);",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Accept",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "X-Request-ID",
						"value": "{{$randomUUID}}",
						"type": "text"
					},
					{
						"warning": "This is a duplicate header and will be overridden by the Authorization header generated by Postman.",
						"key": "Authorization",
						"value": " Bearer 4nZQPDGimJ8PlU0TMmzW",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Corporate-Id",
						"value": "{{PSU-Corporate-Id}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-IP-Address",
						"value": "{{$randomIP}}",
						"type": "text"
					},
					{
						"key": "PSU-IP-Port",
						"value": "{{PSU-IP-Port}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-User-Agent",
						"value": "{{PSU-User-Agent}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Geo-Location",
						"value": "{{PSU-Geo-Location}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Accept",
						"value": "{{PSU-Accept}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Accept-Charset",
						"value": "{{PSU-Accept-Charset}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Accept-Encoding",
						"value": "{{PSU-Accept-Encoding}}{",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Accept-Language",
						"value": "{{PSU-Accept-Language}}{",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Http-Method",
						"value": "{{PSU-Http-Method}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Device-ID",
						"value": "{{PSU-Device-ID}}",
						"type": "text",
						"disabled": true
					}
				],
				"url": {
					"raw": "https://api-sandbox.sebgroup.com/ais/v6/identified2/accounts",
					"protocol": "https",
					"host": [
						"api-sandbox",
						"sebgroup",
						"com"
					],
					"path": [
						"ais",
						"v6",
						"identified2",
						"accounts"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Account Transactions",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Expect status OK\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"var jsonData = JSON.parse(responseBody);",
							"",
							"postman.setEnvironmentVariable(\"transaction_id\", jsonData.transactions.booked.find(x => !!x._links).transactionId);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Accept",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "X-Request-ID",
						"value": "{{$randomUUID}}",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": " Bearer {{AccessToken}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Corporate-Id",
						"value": "{{PSU-Corporate-Id}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-IP-Address",
						"value": "{{$randomIP}}",
						"type": "text"
					},
					{
						"key": "PSU-IP-Port",
						"value": "{{PSU-IP-Port}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-User-Agent",
						"value": "{{PSU-User-Agent}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Geo-Location",
						"value": "{{PSU-Geo-Location}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Accept",
						"value": "{{PSU-Accept}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Accept-Charset",
						"value": "{{PSU-Accept-Charset}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Accept-Encoding",
						"value": "{{PSU-Accept-Encoding}}{",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Accept-Language",
						"value": "{{PSU-Accept-Language}}{",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Http-Method",
						"value": "{{PSU-Http-Method}}",
						"type": "text",
						"disabled": true
					},
					{
						"key": "PSU-Device-ID",
						"value": "{{PSU-Device-ID}}",
						"type": "text",
						"disabled": true
					}
				],
				"url": {
					"raw": "https://api-sandbox.sebgroup.com/ais/v7/identified2/accounts/6e367bd7-581a-48da-af3b-3406d4c9247b/transactions?bookingStatus=booked",
					"protocol": "https",
					"host": [
						"api-sandbox",
						"sebgroup",
						"com"
					],
					"path": [
						"ais",
						"v7",
						"identified2",
						"accounts",
						"6e367bd7-581a-48da-af3b-3406d4c9247b",
						"transactions"
					],
					"query": [
						{
							"key": "bookingStatus",
							"value": "booked"
						}
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "oauth2",
		"oauth2": [
			{
				"key": "tokenName",
				"value": "Token",
				"type": "string"
			},
			{
				"key": "useBrowser",
				"value": true,
				"type": "boolean"
			},
			{
				"key": "tokenType",
				"value": "",
				"type": "string"
			},
			{
				"key": "accessToken",
				"value": "",
				"type": "string"
			},
			{
				"key": "grant_type",
				"value": "authorization_code",
				"type": "string"
			},
			{
				"key": "headerPrefix",
				"value": "Bearer",
				"type": "string"
			},
			{
				"key": "clientSecret",
				"value": "OvfvEYt5q9jKktMyG8Bs",
				"type": "string"
			},
			{
				"key": "clientId",
				"value": "G6eUENPbLIfcuceHDZRx",
				"type": "string"
			},
			{
				"key": "challengeAlgorithm",
				"value": "S256",
				"type": "string"
			},
			{
				"key": "state",
				"value": "Sandbox",
				"type": "string"
			},
			{
				"key": "scope",
				"value": "psd2_accounts psd2_payments",
				"type": "string"
			},
			{
				"key": "authUrl",
				"value": "https://api-sandbox.sebgroup.com/mga/sps/oauth/oauth20/authorize",
				"type": "string"
			},
			{
				"key": "addTokenTo",
				"value": "header",
				"type": "string"
			},
			{
				"key": "client_authentication",
				"value": "body",
				"type": "string"
			},
			{
				"key": "accessTokenUrl",
				"value": "https://api-sandbox.sebgroup.com/mga/sps/oauth/oauth20/token",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}